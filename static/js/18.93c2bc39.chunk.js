(this["webpackJsonpsmart-cssd"]=this["webpackJsonpsmart-cssd"]||[]).push([[18],{744:function(e,t,a){"use strict";var r=a(244),n=a(0),o=a.n(n),i=a(747),s=a(23);function c(){var e;window.gtag&&(e=window).gtag.apply(e,arguments)}var l={pageview:function(e){c("config","",e)},event:function(e,t){c("event",e,t)}},m=Object(n.forwardRef)((function(e,t){var a=e.title,c=e.children,m=Object(r.a)(e,["title","children"]),u=Object(s.h)(),d=Object(n.useCallback)((function(){l.pageview({page_path:u.pathname})}),[u]);return Object(n.useEffect)((function(){d()}),[d]),o.a.createElement("div",Object.assign({ref:t},m),o.a.createElement(i.a,null,o.a.createElement("title",null,"Smart CSSD - ",a)),c)}));t.a=m},745:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i}));var r=a(103),n=function(e){var t=e.errorCode,a=e.errorMessage,r=e.activityId;return{resultFlag:!1,errorCode:null!==t&&void 0!==t?t:"something went wrong",errorMessage:a,activityId:null!==r&&void 0!==r?r:""}},o=function(e){var t,a=e.data;return(t=a)?{resultFlag:!0,value:Object(r.a)({},t)}:{resultFlag:!0}},i=function(e){if(e.response){var t=e.response,a=t.data,r=t.status,o=t.statusText;t.headers;return n(a||{errorMessage:"".concat(r,": ").concat(o)})}return e.request?(console.error(e.request),console.error("Error: ",e.message),n({errorMessage:e.message})):(console.error("Error: ",e.message),n({errorMessage:e.message}))}},746:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(0);function n(){var e=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),e}},753:function(e,t,a){"use strict";var r=a(92),n=a(244),o=a(0),i=a.n(o),s=a(4),c=a(443),l=a(22),m=Object(c.a)((function(e){return{root:{fontFamily:e.typography.fontFamily,alignItems:"center",borderRadius:2,display:"inline-flex",flexGrow:0,whiteSpace:"nowrap",cursor:"default",flexShrink:0,fontSize:e.typography.pxToRem(12),fontWeight:e.typography.fontWeightMedium,height:20,justifyContent:"center",letterSpacing:.5,minWidth:20,padding:e.spacing(.5,1),textTransform:"uppercase"},primary:{color:e.palette.primary.main,backgroundColor:Object(l.c)(e.palette.primary.main,.08)},secondary:{color:e.palette.secondary.main,backgroundColor:Object(l.c)(e.palette.secondary.main,.08)},error:{color:e.palette.error.main,backgroundColor:Object(l.c)(e.palette.error.main,.08)},success:{color:e.palette.success.main,backgroundColor:Object(l.c)(e.palette.success.main,.08)},warning:{color:e.palette.warning.main,backgroundColor:Object(l.c)(e.palette.warning.main,.08)}}}));function u(e){var t=e.className,a=e.color,o=e.children,c=(e.style,Object(n.a)(e,["className","color","children","style"])),l=m();return i.a.createElement("span",Object.assign({className:Object(s.a)(l.root,Object(r.a)({},l[a],a),t)},c),o)}u.defaultProps={className:"",color:"secondary"},t.a=u},757:function(e,t,a){"use strict";var r=a(244),n=a(0),o=a.n(n),i=a(78),s=a(5),c=a.n(s),l=a(55),m=a(723),u=a(443),d=a(728),p=a(4),g=Object(u.a)((function(e){return{root:{padding:e.spacing(1.2),textDecoration:"underline"}}}));function b(e){var t=e.className,a=Object(r.a)(e,["className"]),n=g(),s=Object(m.a)([l.e.TRANSLATIONS]).t;return o.a.createElement(d.a,Object.assign({component:i.a,to:"/",className:Object(p.a)(n.root,t)},a),s("back to main page"))}b.prototype={className:c.a.string},t.a=Object(n.memo)(b)},758:function(e,t,a){"use strict";var r=a(244),n=a(0),o=a.n(n),i=a(4),s=a(443),c=a(690),l=Object(s.a)((function(e){return{root:{color:e.palette.common.white}}}));t.a=function(e){var t=e.children,a=e.className,n=Object(r.a)(e,["children","className"]),s=l();return o.a.createElement(c.a,Object.assign({variant:"h3",className:Object(i.a)(a,s.root)},n),t)}},767:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s}));var r=a(67),n=a(745),o=function(e){var t=e.filters,a=e.sort,o=e.page,i=e.limit;return new Promise((function(e,s){r.a.get("/api/borrowing-history/fetch",{params:{sort:a,page:o,limit:i,filters:t}}).then((function(t){var a=n.b(t);e(a)})).catch((function(e){var t=n.a(e);s(t)}))}))},i=function(e){return new Promise((function(t,a){r.a.get("/api/borrowing-history/getById",{params:{id:e}}).then((function(e){var a=n.b(e);t(a)})).catch((function(e){var t=n.a(e);a(t)}))}))},s=function(e){return new Promise((function(t,a){r.a.get("/api/borrowing-history/getEquipments",{params:{id:e}}).then((function(e){var a=n.b(e);t(a)})).catch((function(e){var t=n.a(e);a(t)}))}))}},768:function(e,t,a){"use strict";var r=a(244),n=a(0),o=a.n(n),i=a(4),s=a(753),c=a(443),l=Object(c.a)((function(){return{root:{}}}));t.a=function(e){var t=e.status,a=e.className,n=Object(r.a)(e,["status","className"]),c=l(),m="";switch(t){case"Borrowed":m="warning";break;case"Returned":m="success";break;case"Created":m="secondary"}return(o.a.createElement(s.a,Object.assign({color:m,className:Object(i.a)(c.root,a)},n),t))}},850:function(e,t,a){"use strict";a.r(t);var r=a(247),n=a(16),o=a.n(n),i=a(31),s=a(103),c=a(56),l=a(0),m=a.n(l),u=a(723),d=a(55),p=a(746),g=a(80),b=a(767),f=a(744),v=a(244),h=a(4),y=a(443),E=a(750),O=a(755),w=a(757),j=a(758),T=a(92),N=a(733),S=a(703),x=a(727),C=a(739),k=a(725),I=a(782),P=a(728),R=a(734),B=a(685),F=a(764),H=a(690),W=a(843),A=a(844),L=a(845),z=a(751),M=Object(y.a)((function(e){return{root:{},queryButton:{marginLeft:e.spacing(1),paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},queryDivider:{margin:e.spacing(0,3)},queryCard:{minHeight:60,borderRadius:e.spacing(1),padding:e.spacing(2)},queryField:{width:"95%",marginLeft:e.spacing(2),marginRight:e.spacing(1)},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));var q=function(e){var t=e.onFilters,a=e.className,r=Object(v.a)(e,["onFilters","className"]),n=M(),o=Object(u.a)([d.e.SETS,d.e.TRANSLATIONS]).t,i=Object.entries(d.a).map((function(e){return{label:e[0],value:e[1]}})),p={surgicalType:"",status:"",borrowedBy:"",borrowTimestampFrom:"",borrowTimestampTo:"",returnedBy:"",returnedTimestampFrom:"",returnedTimestampTo:""},g=Object(z.e)({mode:"onChange",defaultValues:p}),b=g.register,f=g.reset,y=g.handleSubmit,w=g.formState,j=g.errors,q=w.isDirty,D=w.isSubmitting,Y=w.isSubmitted,G=Object(l.useState)(!1),_=Object(c.a)(G,2),Z=_[0],J=_[1],K=function(e){e.persist(),f(Object(s.a)({},p)),!0===Y&&t(Object(s.a)({},p))},V=function(e){return!(!j||!j[e])},Q=function(e){var t,a;return null!==(t=null===(a=j[e])||void 0===a?void 0:a.message)&&void 0!==t?t:null};return console.log(j),m.a.createElement(E.a,Object.assign({maxWidth:"md",className:Object(h.a)(a,n.root)},r),m.a.createElement("form",{onSubmit:y((function(e){q&&t(Object(s.a)({},e))}))},m.a.createElement(N.a,{className:n.queryCard},m.a.createElement(S.a,{display:"flex",alignItems:"center"},m.a.createElement(x.a,{fullWidth:!0,className:n.queryField,size:"small",label:o("borrowingHistory:search surgical type"),placeholder:o("borrowingHistory:search surgical type placeholder"),name:"surgicalType",inputRef:b,error:V("surgicalType"),helperText:Q("surgicalType")}),m.a.createElement(C.a,{only:["md","lg","xl"]},m.a.createElement(k.a,{color:"primary",disabled:D,onClick:K,size:"small"},m.a.createElement(W.a,null)),m.a.createElement(k.a,{type:"submit",color:"primary",disabled:D,size:"small"},m.a.createElement(A.a,null))),m.a.createElement(C.a,{smDown:!0},m.a.createElement(I.a,{orientation:"vertical",flexItem:!0,className:n.queryDivider}),m.a.createElement(P.a,{variant:"outlined",color:"secondary",className:n.queryButton,disabled:D,onClick:K,size:"small"},m.a.createElement(W.a,null),o("translations:clear")),m.a.createElement(P.a,{type:"submit",variant:"outlined",color:"primary",className:n.queryButton,disabled:D,size:"small"},m.a.createElement(A.a,null),o("translations:search"))),m.a.createElement(R.a,{disableSpacing:!0},m.a.createElement(k.a,{className:Object(h.a)(n.expand,Object(T.a)({},n.expandOpen,Z)),"aria-label":"Advance filters","aria-expanded":Z,onClick:function(){J(!Z)},title:o("translations:advance filters"),size:"small"},m.a.createElement(L.a,null)))),m.a.createElement(B.a,{in:Z,timeout:"auto",unmountOnExit:!0},m.a.createElement(F.a,null,m.a.createElement(H.a,{variant:"h4"},o("translations:advance filters")),m.a.createElement(O.a,{container:!0,spacing:2,style:{marginTop:8}},m.a.createElement(O.a,{item:!0,xs:12,md:8},m.a.createElement(x.a,{fullWidth:!0,name:"status",inputRef:b,variant:"outlined",label:o("borrowingHistory:status"),select:!0,SelectProps:{native:!0},InputLabelProps:{shrink:!0},size:"small",error:V("status"),helperText:Q("status")},i.map((function(e){return m.a.createElement("option",{key:e.value,value:e.value},e.label)})))),m.a.createElement(O.a,{item:!0,container:!0,xs:12,spacing:2,direction:"row",justify:"flex-start",alignItems:"center"},m.a.createElement(O.a,{item:!0,xs:12,sm:12,md:6,lg:4},m.a.createElement(x.a,{fullWidth:!0,inputRef:b,name:"borrowedBy",label:o("borrowingHistory:borrowed by"),InputLabelProps:{shrink:!0},size:"small",variant:"outlined"})),m.a.createElement(O.a,{item:!0,xs:12,sm:12,md:6,lg:4},m.a.createElement(x.a,{fullWidth:!0,inputRef:b,name:"borrowTimestampFrom",type:"datetime-local",label:o("borrowingHistory:borrowed timestamp from"),InputLabelProps:{shrink:!0},size:"small",variant:"outlined"})),m.a.createElement(O.a,{item:!0,xs:12,sm:12,md:6,lg:4},m.a.createElement(x.a,{fullWidth:!0,inputRef:b,name:"borrowTimestampTo",type:"datetime-local",label:o("borrowingHistory:borrowed timestamp to"),InputLabelProps:{shrink:!0},size:"small",variant:"outlined"}))),m.a.createElement(O.a,{item:!0,container:!0,xs:12,spacing:2,direction:"row",justify:"flex-start",alignItems:"center"},m.a.createElement(O.a,{item:!0,xs:12,sm:12,md:6,lg:4},m.a.createElement(x.a,{fullWidth:!0,inputRef:b,name:"returnedBy",label:o("borrowingHistory:returned by"),InputLabelProps:{shrink:!0},size:"small",variant:"outlined",error:V("returnedBy"),helperText:Q("returnedBy")})),m.a.createElement(O.a,{item:!0,xs:12,sm:12,md:6,lg:4},m.a.createElement(x.a,{fullWidth:!0,inputRef:b,name:"returnedTimestampFrom",type:"datetime-local",label:o("borrowingHistory:returned timestamp from"),InputLabelProps:{shrink:!0},size:"small",variant:"outlined",error:V("returnedTimestampFrom"),helperText:Q("returnedTimestampFrom")})),m.a.createElement(O.a,{item:!0,xs:12,sm:12,md:6,lg:4},m.a.createElement(x.a,{fullWidth:!0,inputRef:b,name:"returnedTimestampTo",type:"datetime-local",label:o("borrowingHistory:returned timestamp to"),InputLabelProps:{shrink:!0},size:"small",variant:"outlined",error:V("returnedTimestampTo"),helperText:Q("returnedTimestampTo")})))))))))},D=Object(y.a)((function(e){return{root:{minWidth:"100%"},previousButton:{"&:hover":{textDecoration:"underline"}},titleRow:{paddingTop:e.spacing(1)},headerBackground:Object(s.a)({height:130,zIndex:e.zIndex.drawer+100,marginTop:e.spacing(1)},e.name===d.d.LIGHT?{boxShadow:"none",background:"linear-gradient(90deg, ".concat(e.palette.primary.main," 30%, ").concat(e.palette.secondary.main," 180%)")}:{},{},e.name===d.d.ONE_DARK?{backgroundColor:e.palette.background.default}:{}),filterWrapper:{marginTop:-127}}}));var Y=function(e){var t=e.onFilters,a=e.className,r=Object(v.a)(e,["onFilters","className"]),n=D(),o=Object(u.a)([d.e.TRANSLATIONS,d.e.SETS]).t;return m.a.createElement("div",Object.assign({className:Object(h.a)(n.root,a)},r),m.a.createElement("div",{className:n.headerBackground}),m.a.createElement(E.a,{maxWidth:"md",className:n.filterWrapper},m.a.createElement(O.a,{alignItems:"center",container:!0,justify:"space-between",className:n.titleRow},m.a.createElement(O.a,{item:!0},m.a.createElement(j.a,null,o("borrowingHistory:page title"))),m.a.createElement(O.a,{item:!0},m.a.createElement(w.a,{className:n.previousButton}))),m.a.createElement(q,{onFilters:t})))},G=a(778),_=a(720),Z=Object(y.a)((function(e){return{root:Object(T.a)({display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"center"},e.breakpoints.up("md"),{justifyContent:"space-between"}),sortByField:{},sortButton:{textTransform:"none",letterSpacing:0,marginRight:e.spacing(2)},displayItemCounts:{}}}));function J(e){var t=e.itemCounts,a=e.onSortChange,r=(e.onModeChange,e.className),n=Object(v.a)(e,["itemCounts","onSortChange","onModeChange","className"]),o=Z(),i=Object(u.a)([d.e.TRANSLATIONS,d.e.SETS]).t,s=[{value:"surgicalType|asc",label:"Surgical Type (Ascending A to Z)"},{value:"surgicalType|desc",label:"Surgical Type (Descending Z to A)"}],p=Object(l.useState)(s[0].value),g=Object(c.a)(p,2),b=g[0],f=g[1];return m.a.createElement(S.a,Object.assign({className:Object(h.a)(r,o.root)},n),m.a.createElement(C.a,{smDown:!0},m.a.createElement(S.a,{display:"flex",alignItems:"center"},m.a.createElement(H.a,{className:o.displayItemCounts,variant:"h5",color:"textPrimary"},"".concat(i("translations:showing")," ").concat(t," ").concat(i("borrowingHistory:items"))))),m.a.createElement(S.a,{display:"flex",alignItems:"center"},m.a.createElement(x.a,{label:i("translations:sort by"),name:"sort",onChange:function(e){e.persist(),f(e.target.value),a(e.target.value)},select:!0,SelectProps:{native:!0},value:b,variant:"outlined",size:"small",className:o.sortByField},s.map((function(e){return m.a.createElement("option",{key:e.value,value:e.value},e.label)})))))}J.defaultProps={itemCounts:0,onSortChange:function(){},onModeChange:function(){},className:""};var K=Object(_.a)()(J),V=a(23),Q=a(78),U=a(817),X=a(828),$=a(731),ee=a(786),te=a(768),ae=function(e){var t=e.children;return(m.a.createElement(O.a,{item:!0,container:!0,direction:"column",xs:12,sm:6,md:3,lg:3},t))},re=Object(y.a)((function(e){return{root:{minWidth:178},status:{paddingRight:e.spacing(1)},value:{fontFamily:e.typography.body2.fontFamily,fontWeight:e.typography.h3.fontWeight}}}));var ne=function(e){var t,a,r,n,o,i,s=e.loading,c=e.borrowTime,l=e.className,p=Object(v.a)(e,["loading","borrowTime","className"]),g=re(),b=Object(u.a)([d.e.TRANSLATIONS,d.e.BORROWING_HISTORY]).t,f=Object(V.g)(),y=null!==(t=null===c||void 0===c?void 0:c.surgicalType)&&void 0!==t?t:"",E=null!==(a=null===c||void 0===c?void 0:c.medicalToolsCount)&&void 0!==a?a:0,w=null!==(r=null===c||void 0===c?void 0:c.medicalItemsCount)&&void 0!==r?r:0,j=(null===c||void 0===c?void 0:c.borrowTimestamp)?U(c.borrowTimestamp).format("DD-MM-YYYY HH:mm"):("",""),T=null!==(n=null===c||void 0===c?void 0:c.borrowBy)&&void 0!==n?n:"",x=(null===c||void 0===c?void 0:c.returnTimestamp)?U(c.returnTimestamp).format("DD-MM-YYYY HH:mm"):("",""),C=null!==(o=null===c||void 0===c?void 0:c.returnBy)&&void 0!==o?o:"",k=null!==(i=null===c||void 0===c?void 0:c.status)&&void 0!==i?i:"",I=C?"".concat(C," | ").concat(x):"-",R=T?"".concat(T," | ").concat(j):"-",B=[{label:b("borrowingHistory:medical tools count"),value:E},{label:b("borrowingHistory:medical items count"),value:w},{label:b("borrowingHistory:borrowed by"),value:"".concat(R)},{label:b("borrowingHistory:last returned by"),value:"".concat(I)}];return m.a.createElement(N.a,Object.assign({className:Object(h.a)(g.root,l)},p),m.a.createElement(X.a,{title:s?m.a.createElement(ee.a,{animation:"wave",variant:"text","data-testid":"skeleton-title"}):m.a.createElement(O.a,{container:!0,direction:"row",alignItems:"center"},m.a.createElement(O.a,{item:!0,className:g.status},m.a.createElement(te.a,{status:k})),m.a.createElement(O.a,{item:!0},m.a.createElement($.a,{className:g.name,color:"inherit",component:Q.a,to:"/borrowing-history/".concat(c.id,"/detail"),underline:"none"},m.a.createElement(H.a,{color:"textPrimary",variant:"h3"},y))))}),m.a.createElement(S.a,{pb:1,px:3},s?m.a.createElement("div",{"data-testid":"skeleton-details"},m.a.createElement(ee.a,{animation:"wave",height:15,style:{marginBottom:6}}),m.a.createElement(ee.a,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),m.a.createElement(ee.a,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),m.a.createElement(ee.a,{animation:"wave",height:10,width:"90%"})):m.a.createElement(O.a,{container:!0,alignItems:"center",justify:"space-between",spacing:1},B.map((function(e){var t=e.label,a=e.value;return(m.a.createElement(ae,{key:t},m.a.createElement(O.a,{item:!0},m.a.createElement(H.a,{gutterBottom:!0,variant:"body2",color:"textSecondary"},t)),m.a.createElement(O.a,{item:!0},m.a.createElement(H.a,{className:g.value},a))))})))),m.a.createElement(S.a,{py:2,px:2},m.a.createElement(O.a,{alignItems:"center",container:!0,justify:"flex-end",spacing:2},m.a.createElement(O.a,{item:!0},s?m.a.createElement("div",{"data-testid":"skeleton-view-details-button"},m.a.createElement(ee.a,{animation:"wave",height:10,width:"80%"})):m.a.createElement(m.a.Fragment,null,m.a.createElement(P.a,{color:"secondary",onClick:function(e){e.persist();var t="/borrowing-history/".concat(c.id,"/detail");f.push(t)},variant:"outlined",size:"small"},b("borrowingHistory:view details")))))))},oe=Object(y.a)((function(e){return{root:{},sortWrapper:{marginBottom:e.spacing(1)}}}));function ie(e){var t=e.loading,a=e.borrowTimes,r=e.itemCounts,n=(e.limit,e.onSortChange),o=(e.onRemove,e.className),i=Object(v.a)(e,["loading","borrowTimes","itemCounts","limit","onSortChange","onRemove","className"]),s=oe(),u=Object(l.useState)(""),d=Object(c.a)(u,2),p=d[0],g=d[1];if(!0===t){for(var b=[],f=0;f<8;f++)b.push({id:Object(G.a)()});a=[].concat(b)}return(m.a.createElement("div",Object.assign({className:Object(h.a)(s.root,o)},i),m.a.createElement(K,{itemCounts:r,onSortChange:n,onModeChange:function(e){g(e)},className:s.sortWrapper}),m.a.createElement(O.a,{container:!0,spacing:1},a.map((function(e){return m.a.createElement(O.a,{item:!0,key:e.id,md:"grid"===p?3:12,sm:"grid"===p?6:12,xs:12},m.a.createElement(ne,{borrowTime:e,loading:t}))})))))}ie.defaultProps={loading:!0,itemCounts:0,limit:0,borrowTimes:[],onSortChange:function(){},className:""};var se=ie,ce=a(819),le=Object(y.a)((function(e){return{root:{}}}));function me(e){var t=e.page,a=e.limit,r=e.count,n=e.onChangePage,o=e.onChangeRowsPerPage,i=e.className,s=Object(v.a)(e,["page","limit","count","onChangePage","onChangeRowsPerPage","className"]),c=le(),l=Object(u.a)([d.e.TRANSLATIONS,d.e.SETS]).t,p=d.c.PAGE_SIZES;return m.a.createElement(S.a,Object.assign({className:Object(h.a)(i,c.root)},s,{display:"flex",justifyContent:"center"}),m.a.createElement(ce.a,{component:"div",count:r,onChangePage:function(e,t){e.persist(),n(t)},onChangeRowsPerPage:function(e){e.persist(),o(e.target.value)},page:t,rowsPerPage:a,rowsPerPageOptions:p,labelRowsPerPage:l("translations:rows per page"),nextIconButtonText:l("translations:next page"),backIconButtonText:l("translations:previous page")}))}me.defaultProps={page:d.c.PAGE,limit:d.c.PAGE_SIZE,count:0,onChangePage:function(){},onChangeRowsPerPage:function(){},className:""};var ue=me,de=Object(y.a)((function(e){return{root:{backgroundColor:e.palette.background.dark},content:{marginTop:e.spacing(3)}}}));t.default=function(){var e=de(),t=Object(u.a)([d.e.TRANSLATIONS,d.e.BORROWING_HISTORY]).t,a=Object(g.b)().enqueueSnackbar,n=Object(p.a)(),v=Object(l.useState)(!0),h=Object(c.a)(v,2),y=h[0],O=h[1],w=Object(l.useState)(null),j=Object(c.a)(w,2),T=j[0],N=j[1],x=Object(l.useState)(0),C=Object(c.a)(x,2),k=C[0],I=C[1],P=Object(l.useState)("surgicalType|asc"),R=Object(c.a)(P,2),B=R[0],F=R[1],H=Object(l.useState)(8),W=Object(c.a)(H,2),A=W[0],L=W[1],z=Object(l.useState)({surgicalType:"",status:"",borrowedBy:"",borrowTimestampFrom:"",borrowTimestampTo:"",returnedBy:"",returnedTimestampFrom:"",returnedTimestampTo:""}),M=Object(c.a)(z,2),q=M[0],D=M[1],G=Object(l.useCallback)(function(){var e=Object(i.a)(o.a.mark((function e(t,r,i,s){var c,l,m,u,d,p,g,f,v,h,y,E,w;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,c=[],l={},m={},Object.entries(t).forEach((function(e){var t=e[0],a=e[1];switch(t){case"surgicalType":case"borrowedBy":case"returnedBy":if(""!==a&&a){c.push({field:t,value:a,operator:"contains"});break}break;case"status":if(""!==a&&a){c.push({field:t,value:a,operator:"eq"});break}break;case"borrowTimestampFrom":case"borrowTimestampTo":if(""!==a&&a){l[t]=a;break}break;case"returnedTimestampFrom":case"returnedTimestampTo":if(""!==a&&a){m[t]=a;break}}})),Object.keys(l).length&&(u=l.borrowTimestampFrom,d=l.borrowTimestampTo,u&&d&&c.push({logic:"and",filters:[{field:"borrowTimestamp",value:u,operator:"gte"},{field:"borrowTimestamp",value:d,operator:"lte"}]}),u&&!d&&c.push({field:"borrowTimestamp",value:u,operator:"gte"}),!u&&d&&c.push({field:"borrowTimestamp",value:d,operator:"lte"})),Object.keys(m).length&&(p=m.returnedTimestampFrom,g=m.returnedTimestampTo,p&&g&&c.push({logic:"and",filters:[{field:"returnedTimestamp",value:p,operator:"gte"},{field:"returnedTimestamp",value:g,operator:"lte"}]}),p&&!g&&c.push({field:"returnedTimestamp",value:p,operator:"gte"}),!p&&g&&c.push({field:"returnedTimestamp",value:g,operator:"lte"})),e.next=10,Object(b.b)({filters:{logic:"and",filters:c},sort:r,page:i,limit:s});case 10:if(f=e.sent,n.current){e.next=13;break}return e.abrupt("return");case 13:console.log("result: ",f),f.resultFlag?N(f.value):a(f.errors.message,{variant:"error"}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),n.current&&(v=e.t0.errorCode,h=void 0===v?"":v,y=e.t0.errorMessage,E=void 0===y?"":y,w="".concat(h,": ").concat(E),a(w,{variant:"error"}));case 20:return e.prev=20,n.current&&O(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[1,17,20,23]])})));return function(t,a,r,n){return e.apply(this,arguments)}}(),[n,a]);Object(l.useEffect)((function(){G({surgicalType:"",status:"",borrowedBy:"",borrowTimestampFrom:"",borrowTimestampTo:"",returnedBy:"",returnedTimestampFrom:"",returnedTimestampTo:""},"surgicalType|asc",0,8)}),[G]),console.log("loading: ",y,T);var _=T&&T.data?Object(r.a)(T.data):[],Z=T&&T.data?T.data.length:0,J=T&&T.total?T.total:0;return m.a.createElement(f.a,{className:e.root,title:t("borrowingHistory:page title")},m.a.createElement(Y,{onFilters:function(e){D((function(){return Object(s.a)({},e)})),G(e,B,k,A)}}),m.a.createElement(E.a,{maxWidth:"lg",className:e.content},m.a.createElement(S.a,null,m.a.createElement(se,{loading:y,borrowTimes:_,itemCounts:Z,onSortChange:function(e){F((function(){return e})),G(q,e,k,A)},limit:A}),m.a.createElement(ue,{mt:1,page:k,limit:A,count:J,onChangePage:function(e){I((function(){return e})),G(q,B,e,A)},onChangeRowsPerPage:function(e){L((function(){return e})),G(q,B,k,e)}}))))}}}]);
//# sourceMappingURL=18.93c2bc39.chunk.js.map