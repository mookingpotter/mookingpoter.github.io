(this["webpackJsonpsmart-cssd"]=this["webpackJsonpsmart-cssd"]||[]).push([[9],{744:function(e,t,a){"use strict";var n=a(244),r=a(0),o=a.n(r),i=a(747),c=a(23);function l(){var e;window.gtag&&(e=window).gtag.apply(e,arguments)}var s={pageview:function(e){l("config","",e)},event:function(e,t){l("event",e,t)}},u=Object(r.forwardRef)((function(e,t){var a=e.title,l=e.children,u=Object(n.a)(e,["title","children"]),m=Object(c.h)(),d=Object(r.useCallback)((function(){s.pageview({page_path:m.pathname})}),[m]);return Object(r.useEffect)((function(){d()}),[d]),o.a.createElement("div",Object.assign({ref:t},u),o.a.createElement(i.a,null,o.a.createElement("title",null,"Smart CSSD - ",a)),l)}));t.a=u},745:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i}));var n=a(103),r=function(e){var t=e.errorCode,a=e.errorMessage,n=e.activityId;return{resultFlag:!1,errorCode:null!==t&&void 0!==t?t:"something went wrong",errorMessage:a,activityId:null!==n&&void 0!==n?n:""}},o=function(e){var t,a=e.data;return(t=a)?{resultFlag:!0,value:Object(n.a)({},t)}:{resultFlag:!0}},i=function(e){if(e.response){var t=e.response,a=t.data,n=t.status,o=t.statusText;t.headers;return r(a||{errorMessage:"".concat(n,": ").concat(o)})}return e.request?(console.error(e.request),console.error("Error: ",e.message),r({errorMessage:e.message})):(console.error("Error: ",e.message),r({errorMessage:e.message}))}},748:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n={equals:"eq",notEquals:"neq",greaterThan:"gt",greaterThanOrEquals:"gte",lessThan:"lt",lessThanOrEquals:"lte",contains:"ct",startWith:"st"},r=function(e){var t=e.field,a=e.operator,r=void 0===a?n.contains:a,o=e.value;return t?{field:t,operator:r,value:void 0===o?"":o}:null}},753:function(e,t,a){"use strict";var n=a(92),r=a(244),o=a(0),i=a.n(o),c=a(4),l=a(443),s=a(22),u=Object(l.a)((function(e){return{root:{fontFamily:e.typography.fontFamily,alignItems:"center",borderRadius:2,display:"inline-flex",flexGrow:0,whiteSpace:"nowrap",cursor:"default",flexShrink:0,fontSize:e.typography.pxToRem(12),fontWeight:e.typography.fontWeightMedium,height:20,justifyContent:"center",letterSpacing:.5,minWidth:20,padding:e.spacing(.5,1),textTransform:"uppercase"},primary:{color:e.palette.primary.main,backgroundColor:Object(s.c)(e.palette.primary.main,.08)},secondary:{color:e.palette.secondary.main,backgroundColor:Object(s.c)(e.palette.secondary.main,.08)},error:{color:e.palette.error.main,backgroundColor:Object(s.c)(e.palette.error.main,.08)},success:{color:e.palette.success.main,backgroundColor:Object(s.c)(e.palette.success.main,.08)},warning:{color:e.palette.warning.main,backgroundColor:Object(s.c)(e.palette.warning.main,.08)}}}));function m(e){var t=e.className,a=e.color,o=e.children,l=(e.style,Object(r.a)(e,["className","color","children","style"])),s=u();return i.a.createElement("span",Object.assign({className:Object(c.a)(s.root,Object(n.a)({},s[a],a),t)},l),o)}m.defaultProps={className:"",color:"secondary"},t.a=m},763:function(e,t,a){"use strict";var n=a(103),r=a(245),o=a(67),i=a(748),c=a(745),l=new function e(){Object(r.a)(this,e),this.getAll=function(){return new Promise((function(e,t){o.a.get("/api/inventories/medicalDevices").then((function(t){var a=c.b(t);e(a)})).catch((function(e){var a=c.a(e);t(a)}))}))},this.getById=function(e){return new Promise((function(t,a){o.a.get("/api/inventories/medicalDevices/"+e,{params:{equipmentId:e}}).then((function(e){var a=c.b(e);t(a)})).catch((function(e){var t=c.a(e);a(t)}))}))},this.getList=function(e,t,a,n){return new Promise((function(r,l){var s=e&&""!==e?Object(i.a)({field:"name",value:e}):"";o.a.get("/api/inventories/medicalDevices",{params:{filter:s,sort:t,page:a,pageSize:n}}).then((function(e){var t=c.b(e);r(t)})).catch((function(e){var t=c.a(e);l(t)}))}))},this.insert=function(e){return new Promise((function(t,a){o.a.post("/api/inventories/medicalDevices",e).then((function(e){t(e.data)})).catch((function(e){a({resultFlag:!1,value:null,errorCode:"Something is wrong.",errorMessage:e.message,activityId:null})}))}))},this.update=function(e){return new Promise((function(t,a){o.a.put("/api/inventories/medicalDevices",e).then((function(e){t(e.data)})).catch((function(e){a({resultFlag:!1,value:null,errorCode:"Something is wrong.",errorMessage:e.message,activityId:null})}))}))},this.remove=function(e){return new Promise((function(t,a){console.log("remove: ",e),o.a.delete("/api/inventories/medicalDevices/"+e.id,Object(n.a)({},e)).then((function(e){console.log(e);var a=c.b(e);t(a)})).catch((function(e){var t=c.a(e);a(t)}))}))}};t.a=l},854:function(e,t,a){"use strict";a.r(t);var n=a(103),r=a(16),o=a.n(r),i=a(31),c=a(56),l=(a(92),a(0)),s=a.n(l),u=(a(4),a(723)),m=a(57),d=a(55),p=a(78),g=a(6),f=a(809),b=a(443),v=a(741),h=a(54),E=a(703),y=a(690),j=a(728),O=a(755),S=a(733),x=a(764),w=a(761),I=a(778),R=a(760),C=a(751),F=a(810),k=a(248),N=a(744),q=a(763),D=a(818),T=a(813),P=a.n(T),L=Object(b.a)((function(e){return{bgDropZone:{height:"350px",background:"#E4E4E4",border:"1px solid #E1E1E1"},pointerCursor:{cursor:"pointer"},iconUploadSize:{fontSize:72,color:"#404040"}}}));var M=function(e){var t=e.onHandleFileSelect,a=L(),n=Object(u.a)([d.e.EQUIPMENTS,d.e.TRANSLATIONS]).t;return s.a.createElement(D.a,{onDrop:function(e){return t(e)},name:"image",multiple:!1,accept:"image/jpeg,image/png"},(function(e){var t=e.getRootProps,r=e.getInputProps;return(s.a.createElement("div",Object.assign({},t({className:"dropzone"}),{className:a.bgDropZone}),s.a.createElement("input",Object.assign({name:"image"},r())),s.a.createElement(E.a,{display:"flex",alignItems:"center",textAlign:"center",height:"100%",className:a.pointerCursor},s.a.createElement(E.a,{width:"100%"},s.a.createElement(P.a,{className:a.iconUploadSize}),s.a.createElement(y.a,{variant:"body1"},n("equipments:form2.title upload image"))))))}))},U=Object(b.a)((function(e){return{boxImageRoot:{position:"relative"},boxImageMenuRoot:{position:"absolute",width:"100%",height:"100%",transition:"0.5s",opacity:"0","&:hover":{opacity:"1"}},boxImage:{objectFit:"contain",width:"100%",background:"#f6f6f6"}}}));var A=function(e){var t=Object.assign({},e),a=U(),n=Object(u.a)([d.e.EQUIPMENTS,d.e.TRANSLATIONS]).t,r=t.file,o=t.onHandleDeleteImage;return s.a.createElement(E.a,{className:a.boxImageRoot},s.a.createElement(E.a,{className:a.boxImageMenuRoot},s.a.createElement(E.a,{display:"flex",justifyContent:"flex-end"},s.a.createElement(j.a,{variant:"contained",color:"secondary",onClick:function(){return o()}},n("equipments:button.delete")))),s.a.createElement("img",{src:r,className:a.boxImage,alt:r.name}))},W=Object(b.a)((function(e){return{root:{},gridUploadImage:{paddingTop:e.spacing(2)}}}));var z=function(e){var t=Object.assign({},e),a=W(),n=Object(l.useState)(null),r=Object(c.a)(n,2),m=r[0],p=r[1],g=Object(u.a)([d.e.EQUIPMENTS,d.e.TRANSLATIONS]).t,f=t.setValue,b=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"!==typeof(a=t[0])&&((n=new FileReader).onload=function(e){var a=v(t);e.target.result;p(a),f("image",a)},n.readAsDataURL(a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){return e.map((function(e){return Object.assign({preview:URL.createObjectURL(e)})}))[0].preview};return console.log("-------------render UploadImage-------------"),s.a.createElement(l.Fragment,null,s.a.createElement(y.a,{variant:"h5",color:"textPrimary"},g("equipments:form2.title")),s.a.createElement(E.a,{className:a.gridUploadImage,spacing:3},null===m?s.a.createElement(M,{onHandleFileSelect:b}):s.a.createElement(A,{file:m,onHandleDeleteImage:function(){p(null),f("image","")}})))},H=a(727),V=a(814),Q=a(816),B=a.n(Q),J=a(815),Z=a.n(J),G=a(753),_=[{name:"name",multiple:!1,label:"equipments:form1.name",default:""},{name:"description",multiple:!0,label:"equipments:form1.detail",default:""}],K=Object(b.a)((function(e){return{root:{},btnScanRFIDStop:{marginTop:e.spacing(2),backgroundColor:e.palette.error.main,color:e.palette.common.white,"&:hover":{backgroundColor:e.palette.error.dark}},btnScanRFIDStart:{marginTop:e.spacing(2),backgroundColor:e.palette.secondary.main,color:e.palette.common.white,"&:hover":{backgroundColor:e.palette.secondary.dark}},btnRemoveScanRFID:{color:e.palette.error.main,"&:hover":{color:e.palette.error.dark,backgroundColor:Object(V.fade)(e.palette.error.dark,.1)}},btnIconScanRFID:{marginRight:e.spacing(1)}}}));var X=function(e){var t=Object.assign({},e),a=K(),n=(Object(m.b)(),Object(u.a)([d.e.EQUIPMENTS,d.e.TRANSLATIONS,d.e.ERRORS]).t),r=t.control,o=t.errors,i=t.rfidField,c=t.watchRFIDFields,p=t.isScanRFID,g=t.isRfidList,f=t.onScanRFID;console.log(t);var b=function(e){return!(!o||!o[e])},v=function(e){var t,a;return null!==(t=null===(a=o[e])||void 0===a?void 0:a.message)&&void 0!==t?t:null};return console.log("-------------render DetailPage-------------"),s.a.createElement(s.a.Fragment,null,s.a.createElement(y.a,{variant:"h5",color:"textPrimary"},n("equipments:form1.title")),s.a.createElement(E.a,{mt:2},s.a.createElement(y.a,{variant:"body2",color:"textSecondary"},n("equipments:form1.description text"))),s.a.createElement(E.a,{mt:2},s.a.createElement(y.a,{variant:"subtitle1",color:"textSecondary"})),_.map((function(e){return s.a.createElement(E.a,{mt:2,key:e.name},e.multiple?s.a.createElement(C.a,{name:e.name,control:r,render:function(t){return s.a.createElement(H.a,Object.assign({error:b(e.name),helperText:v(e.name),variant:"outlined",fullWidth:!0,label:n(e.label),value:t.value,multiline:!0,rows:2,rowsMax:5},t,{inputProps:{"data-testid":"txt-".concat(e.name)}}))}}):s.a.createElement(C.a,{"data-testid":"txt-".concat(e.name),name:e.name,control:r,render:function(t){return s.a.createElement(H.a,Object.assign({error:b(e.name),helperText:v(e.name),variant:"outlined",fullWidth:!0,label:n(e.label),value:t.value},t,{inputProps:{"data-testid":"txt-".concat(e.name)}}))}}))})),s.a.createElement(E.a,{mt:2},s.a.createElement(y.a,{variant:"h6",color:"textPrimary"},n("equipments:form1.label for the rfid")),s.a.createElement(y.a,{variant:"body2",color:"textSecondary"},n("equipments:form1.description for the rfid")),g&&0===c.length&&s.a.createElement(E.a,{mt:2},s.a.createElement(G.a,{color:"error"},n("equipments:form1.list empty for the rfid"))),s.a.createElement(j.a,{variant:"contained",className:p?a.btnScanRFIDStop:a.btnScanRFIDStart,onClick:f},p?s.a.createElement(l.Fragment,null,s.a.createElement(Z.a,{className:a.btnIconScanRFID}),n("equipments:stop scan register rfid medical tools")):s.a.createElement(l.Fragment,null,s.a.createElement(B.a,{className:a.btnIconScanRFID}),n("equipments:scan register rfid medical tools"))),i.fields.map((function(e,t){return s.a.createElement(E.a,{key:e.id,pt:3,pb:2,display:"flex",alignItems:"center",justifyContent:"space-between"},s.a.createElement(C.a,{name:"rfidList[".concat(t,"].code"),control:r,defaultValue:"".concat(e.code),render:function(a){return s.a.createElement(y.a,{name:"rfidList[".concat(t,"].code"),color:"textSecondary"},e.code)}}))}))))};Object(g.a)((function(e){return{vertical:{marginLeft:e.spacing(2),padding:e.spacing(1,0,1,0)},line:{borderColor:e.palette.divider}}}))(f.a),Object(b.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,zIndex:1,color:e.palette.action.disabled,width:"2rem",height:"2rem",display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center",fontSize:"1rem",lineHeight:"1.75rem",borderWidth:"0.1rem",borderStyle:"solid",borderColor:e.palette.action.disabled},active:{backgroundColor:e.palette.background.paper,width:"2rem",height:"2rem",borderWidth:"0.1rem",borderStyle:"solid",borderColor:e.palette.action.active,color:e.palette.action.active},completed:{backgroundColor:e.palette.background.paper,borderWidth:"0.1rem",borderStyle:"solid",borderColor:e.palette.action.disabled}}}));var Y=Object(b.a)((function(e){return{root:{backgroundColor:e.palette.background.default,minHeight:"100%",padding:e.spacing(2,0),"& .MuiStepLabel-label":{color:e.palette.action.disabled},"& .MuiStepLabel-active":{color:e.palette.action.active}},stepperRoot:{padding:e.spacing(3,0)},stepperLabel:{color:e.palette.text.secondary},drawerPaper:{width:"300px",padding:e.spacing(2,3,0,3)},drawerTypoFontWeight:{fontWeight:"bold"},btnSaveForm:{marginLeft:e.spacing(4)},boxContainer:{padding:e.spacing(0,9,0,9),height:"100%"},avatar:{backgroundColor:h.a.red[600]}}}));t.default=function(e){var t,a=e.match,r=Y(),m=Object(u.a)([d.e.EQUIPMENTS,d.e.TRANSLATIONS]).t,g=Object(l.useState)(!1),f=Object(c.a)(g,2),b=f[0],h=f[1],D=Object(l.useRef)(!0),T=Object(l.useState)(!1),P=Object(c.a)(T,2),L=P[0],M=P[1],U=Object(l.useState)(!1),A=Object(c.a)(U,2),W=A[0],H=A[1],V=null===(t=a.params)||void 0===t?void 0:t.id,Q=w.c().shape({name:w.d().required(m("errors:required")).min(3,m("errors:must be at least 3 characters")).max(255),description:w.d()}),B=Object(C.e)({mode:"onChange",defaultValues:{name:"",description:"",image:"",rfidList:[]},shouldUnregister:!1,resolver:Object(R.a)(Q)}),J=B.handleSubmit,Z=B.errors,G=B.control,_=B.setValue,K=B.reset,$=B.watch,ee=B.getValues,te=Object(C.d)({control:G,name:"rfidList"}),ae=$("rfidList"),ne=J(function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==ae.length){e.next=3;break}return H(!0),e.abrupt("return");case 3:a=function(e){e.resultFlag?(k.b.success(m("equipments:you are all done")),h(!0)):k.b.errorObj(e)},t.id?q.a.update(t).then(a):q.a.insert(t).then(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(l.useEffect)((function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.getById(V);case 2:t=e.sent,K(Object(n.a)({},null===t||void 0===t?void 0:t.value)),console.log("Data respones --\x3e",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}D.current&&(V&&function(){e.apply(this,arguments)}(),D.current=!1)}),[V,K]),console.log("-------------render IndexDetailPage-------------"),s.a.createElement(N.a,{className:r.root,title:m("equipments:add register medical tools")},b?s.a.createElement(S.a,null,s.a.createElement(x.a,null,s.a.createElement(E.a,{maxWidth:450,mx:"auto"},s.a.createElement(E.a,{display:"flex",justifyContent:"center"},s.a.createElement(v.a,{className:r.avatar},s.a.createElement(F.a,null))),s.a.createElement(E.a,{mt:2},s.a.createElement(y.a,{variant:"h3",color:"textPrimary",align:"center"},m("equipments:you are all done"))),s.a.createElement(E.a,{mt:2},s.a.createElement(y.a,{variant:"body2",color:"textSecondary",align:"center"},m("equipments:message"))),s.a.createElement(E.a,{mt:2,display:"flex",justifyContent:"center"},s.a.createElement(j.a,{variant:"contained",color:"secondary",component:p.a,to:"/equipments"},m("equipments:view your medical tools")))))):s.a.createElement(E.a,{className:r.boxContainer},s.a.createElement(E.a,{display:"flex",justifyContent:"space-between",mb:2},s.a.createElement(E.a,null,s.a.createElement(y.a,{variant:"h6",gutterBottom:!0,color:"textSecondary"},m("equipments:register medical tools")),s.a.createElement(y.a,{variant:"h2",gutterBottom:!0,color:"textPrimary",className:r.drawerTypoFontWeight},m("equipments:add register medical tools"))),s.a.createElement(E.a,null,s.a.createElement(j.a,{variant:"outlined",size:"medium",color:"default",component:p.a,to:"/equipments"},m("equipments:button.exit")),s.a.createElement(j.a,{className:r.btnSaveForm,color:"primary",onClick:function(){J(ne)()},variant:"contained",size:"medium","data-testid":"submit"},m("equipments:button.save")))),s.a.createElement("form",{onSubmit:ne},s.a.createElement(O.a,{className:r.gridUploadImage,container:!0,spacing:3},s.a.createElement(O.a,{item:!0,xs:12,sm:12,md:4},s.a.createElement(z,{setValue:_})),s.a.createElement(O.a,{item:!0,xs:12,sm:12,md:8},s.a.createElement(X,{control:G,errors:Z,rfidField:te,watchRFIDFields:ae,isScanRFID:L,isRfidList:W,onScanRFID:function(e){if(e.persist(),L)M(!1);else{M(!0),H(!1);for(var t=0;t<5;t++)setTimeout((function(){var e=Object(I.a)();te.append({code:e}),ee().rfidList.find((function(t){return t.code===e})).code===e&&console.log("Code RFID Same in list.")}),1e3)}}}))))))}}}]);
//# sourceMappingURL=9.5cab3252.chunk.js.map